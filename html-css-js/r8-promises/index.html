<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <link rel="stylesheet" href="style.css" />
  </head>

  <body>
    <div><button id="botaoCarregar">Carregando cervejas...</button></div>

    <div id="cervejasDiv"></div>
  </body>

  <script>
    let cervejas = [];

    //cs é um array de cervejas

    const carregarDiv = (element, items, headers = [], properties = []) => {
      const div = document.getElementById(element);
      let table = "<table> <tr>";

      for (const header of headers) {
        table += `<th>${header}</th>`;
      }

      table += "</tr>";

      const itensHtml = items.map((item) => {
        return `<tr> ${properties
          .map((prop) => `<td>${item[prop]}</td>`)
          .join("")} </tr>`;
      });

      table += itensHtml.join("\n");
      table += "</table>";
      div.innerHTML = table;
    };

    function carregarCervejas2() {
      fetch("https://random-data-api.com/api/v2/beers?size=3")
        .then((res) => res.json())
        .then((json) =>
          carregarDiv(
            "cervejasDiv",
            json,
            ["Cerveja", "Estilo"],
            ["name", "style"]
          )
        )
        .catch(
          (err) =>
            (document.getElementById(
              "cervejasDiv"
            ).innerHTML = `Fudeu... ${err}`)
        );

      document.getElementById("cervejasDiv").innerHTML = `Fazendo requisição`;
    }

    let botao = document.getElementById("botaoCarregar");

    botao.addEventListener("click", () => carregarCervejas2(cervejas));
  </script>
</html>
