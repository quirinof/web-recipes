<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <link href="style.css" rel="stylesheet" />
  </head>

  <body>
    <div><button id="botaoCarregar">Carregando cervejas...</button></div>

    <div id="cervejasDiv"></div>
  </body>

  <script>
    let cervejas = [];

    //cs é um array de cervejas

    const carregarDiv = (
      cs,
      headers = ["Nome", "Álcool", "Estilo", "Amargor"],
      properties = ["name", "alcohol", "style", "ibu"]
    ) => {
      const div = document.getElementById("cervejasDiv");
      let tabela = `<table> <tr>`;

      headers.forEach((header) => {
        tabela += `<th>${header}</th>`;
      });

      tabela += `</tr>`;

      const itensHtml = cs.map((item) => {
        return `<tr> ${properties
          .map((prop) => `<td>${item[prop]}</td>`)
          .join("")} </tr>`;
      });

      tabela += itensHtml.join("\n");
      tabela += `</table>`;
      div.innerHTML = tabela;
    };

    async function carregarCervejas() {
      try {
        let res = await fetch(
          "https://random-data-api.com/api/v2/beers?size=3"
        );
        cervejas = await res.json();
        carregarDiv(cervejas);
      } catch (err) {
        document.getElementById("cervejasDiv").innerHTML = "Erro de requisição";
      }
    }

    let botao = document.getElementById("botaoCarregar");

    botao.addEventListener("click", () => carregarCervejas());
  </script>
</html>
