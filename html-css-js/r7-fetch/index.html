<!DOCTYPE html>

<html>
  <head>
    <meta charset="UTF-8" />
    <link href="style.css" rel="stylesheet" />
  </head>

  <body>
    <div><button id="botaoCarregar">Carregando usuarios...</button></div>

    <div id="usuariosDiv"></div>
  </body>

  <script>
    let usuarios = [];

    //cs é um array de usuarios

    const carregarDiv = (cs, headers = [], properties = []) => {
      const div = document.getElementById("usuariosDiv");
      let tabela = `<table> <tr>`;

      headers.forEach((header) => {
        tabela += `<th>${header}</th>`;
      });

      tabela += `</tr>`;

      const itensHtml = cs.map((item) => {
        return `<tr> ${properties
          .map((prop) => `<td>${item[prop]}</td>`)
          .join("")} </tr>`;
      });

      tabela += itensHtml.join("\n");
      tabela += `</table>`;
      div.innerHTML = tabela;
    };

    async function carregarUsuarios() {
      try {
        let res = await fetch(
          "https://random-data-api.com/api/v2/users?size=3"
        );
        usuarios = await res.json();
        carregarDiv(
          usuarios,
          ["Cliente", "Email", "Telefone"],
          ["first_name", "email", "phone_number"]
        );
      } catch (err) {
        document.getElementById("usuariosDiv").innerHTML = "Erro de requisição";
      }
    }

    let botao = document.getElementById("botaoCarregar");

    botao.addEventListener("click", () => carregarUsuarios());
  </script>
</html>
